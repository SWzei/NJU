# NJU林泉钢琴社 网站管理员操作手册

本文档面向管理员账号，用于说明信息发布、排班管理、音乐会管理、审核管理、相册管理与测试数据准备的完整操作路径。

管理员账号属于非公开注册账号，由开发者授予；管理员可执行的核心工作包括发布与维护活动公告、创建学期并生成琴房时段、生成草案排班和增量更新并手动调整后发布、导出排班与志愿 CSV、创建与发布音乐会及管理报名信息、创建审核时段并发布审核结果、维护成员页展示相册。

**默认管理员账号**为学号 `A0000000`、密码 `Admin@123`；若需重新初始化，可在 `backend` 目录执行 `npm run db:init`。

**信息发布**页面用于管理活动与公告；活动可填写标题、内容、活动时间、地点，并支持发布新活动、修改已发布活动、切换发布状态与删除活动，公告可填写标题与内容并执行同类发布管理流程。

**琴时安排**页面先做学期与时段准备，即先创建学期，系统会自动生成 2x7x14 标准时段；推荐先创建并激活当前学期，等待成员提交志愿，再执行排班生成与调整。

* 草案排班阶段有两个关键操作：`生成草案排班（注意：会清空当前草案并重新生成。）` 会覆盖当前草案，`更新草案排班（保留已有安排并补全空闲）` 会保留已安排结果并为其他成员补空闲时段。
* 日历手动调整阶段可直接在周历上操作：点击已占用格子可选中成员并移动或互换到其他时段，点击空闲格子可将已选成员安排进去，同时支持删除当前选中安排以及撤销/重做。
* 快捷操作面板在你滚动到排班日历区域时通过右侧 `显示快捷操作` 按钮进入，点击后展开并可再次点击 `隐藏快捷操作`；面板中可快速执行生成草案、更新草案、发布排班、撤销/重做、成员搜索与选择、查看当前选中时段/成员状态，以及一键分配、删除和清除选择。
* 排班质量检查区域会提供总体状态（满足/未满足）、已满足人数 `a/b`、超 2 小时人数、利用率以及未满足要求成员预览表，用于发布前复核。
* 排班导出支持排班日历 CSV 与原始志愿 CSV，可用于社内确认、归档和线下沟通。
* 发布排班时，确认无误后执行发布即可将草案状态转为已发布，成员端将可见最终安排，系统也会按通知配置发送通知。

**音乐会管理**（用于创建音乐会，音乐会具体事宜见“审核管理”）页面可维护字段包括标题、描述、公告内容、报名截止时间、音乐会状态和附件上传（如通知 PDF），可执行的新建、编辑、发布通知成员与下载报名数据 CSV。报名信息查看支持管理员查看完整成员填写内容，包括姓名、学号、曲目中文、曲目英文、时长、QQ、乐谱文件、状态与反馈。

**审核管理**页面可执行创建审核时段（开始/结束/地点）、针对具体报名发布审核结果、填写反馈并触发通知，可下载具体报名信息。

相册展示管理入口为 `管理社团 -> 相册展示`，可执行上传本地图片、配置中英文标题与描述、设置显示顺序、控制是否展示和删除展示项，该页面直接控制成员页展示内容。

**常见问题**

* 若你看不到快捷操作按钮，通常是因为该按钮仅在滚动到排班日历区域时显示，或当前没有草案/没有时段导致面板不会出现。
* 若你发现生成草案后手动改动消失，原因是“生成草案排班”会清空当前草案并重算；如需保留当前结果，应使用“更新草案排班”。
* 若成员看不到排班结果，通常是因为当前仅生成了草案但尚未发布，需要执行“发布排班”。
* 若邮件通知未送达，请检查 `.env` 中 SMTP 配置，并检查通知状态与日志。
* 快速导航：主文档为 `README.md`，成员文档为 `docs/README（社员）.md`。
